"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[161],{5161:(D,x,d)=>{d.d(x,{HomePage:()=>N});var g=d(467),u=d(9769),a=d(8370),f=d(2951),s=d(5873),l=d(5206),n=d(5547),h=d(3703);function _(i,c){if(1&i&&(n.j41(0,"ion-select-option",27),n.EFF(1),n.k0s()),2&i){const t=c.$implicit;n.Y8G("value",t),n.R7$(),n.SpI(" ",t," ")}}function b(i,c){if(1&i&&(n.j41(0,"ion-select-option",27),n.EFF(1),n.k0s()),2&i){const t=c.$implicit;n.Y8G("value",t.valor),n.R7$(),n.SpI(" ",t.nombre," ")}}function C(i,c){if(1&i&&(n.j41(0,"div",28)(1,"p"),n.EFF(2,"Vista previa:"),n.k0s(),n.j41(3,"div",29),n.EFF(4),n.k0s()()),2&i){const t=n.XpG();n.R7$(3),n.xc7("background",null==t.color?null:t.color.value),n.R7$(),n.SpI(" ",(null==t.nombre?null:t.nombre.value)||"Nombre de la asignatura"," ")}}let P=(()=>{class i{constructor(t,o,e,r,m){this.fb=t,this.supabase=o,this.loadingCtrl=e,this.toastCtrl=r,this.modalCtrl=m,this.colores=[{valor:"#3b82f6",nombre:"Azul"},{valor:"#10b981",nombre:"Verde"},{valor:"#f59e0b",nombre:"Amarillo"},{valor:"#ef4444",nombre:"Rojo"},{valor:"#8b5cf6",nombre:"P\xfarpura"},{valor:"#ec4899",nombre:"Rosa"},{valor:"#06b6d4",nombre:"Cian"},{valor:"#84cc16",nombre:"Lima"}],this.modalidades=["Presencial","Virtual","H\xedbrida"],(0,f.d)({saveOutline:s.oc8,closeOutline:s.xfX}),this.asignaturaForm=this.fb.group({nombre:["",[l.k0.required,l.k0.minLength(3)]],codigo:["",[l.k0.required]],grupo:["",[l.k0.required]],facultad:[""],programa:[""],localidad:[""],nivel:["",[l.k0.required]],periodo:["",[l.k0.required]],creditos:[1,[l.k0.required,l.k0.min(1),l.k0.max(10)]],modalidad:["Presencial",[l.k0.required]],aula:[""],color:["#3b82f6",[l.k0.required]]})}ngOnInit(){if(console.log("\u{1f527} ngOnInit - Asignatura recibida:",this.asignatura),!this.asignatura)return console.error("\u274c No se recibi\xf3 la asignatura"),this.showToast("Error al cargar datos","danger"),void this.cerrar();this.asignaturaForm.patchValue({nombre:this.asignatura.nombre||"",codigo:this.asignatura.codigo||"",grupo:this.asignatura.grupo||"",facultad:this.asignatura.facultad||"",programa:this.asignatura.programa||"",localidad:this.asignatura.cds||"",nivel:this.asignatura.nivel||"",periodo:this.asignatura.periodo||"",creditos:this.asignatura.creditos||1,modalidad:this.asignatura.modalidad||"Presencial",aula:this.asignatura.aula||"",color:this.asignatura.color||"#3b82f6"}),console.log("\u2705 Formulario cargado:",this.asignaturaForm.value)}cerrar(){this.modalCtrl.dismiss()}guardar(){var t=this;return(0,g.A)(function*(){if(t.asignaturaForm.invalid)return void(yield t.showToast("Completa los campos requeridos","warning"));const o=yield t.loadingCtrl.create({message:"Guardando..."});yield o.present();try{const e=t.asignaturaForm.value,{error:r}=yield t.supabase.from("asignaturas").update({nombre:e.nombre,codigo:e.codigo,grupo:e.grupo,facultad:e.facultad||null,programa:e.programa||null,cds:e.localidad||null,nivel:e.nivel,periodo:e.periodo,creditos:e.creditos,modalidad:e.modalidad,aula:e.aula||null,color:e.color,updated_at:(new Date).toISOString()}).eq("id",t.asignatura.id);yield o.dismiss(),r?(console.error("\u274c Error guardando:",r),yield t.showToast("Error al guardar: "+r.message,"danger")):(yield t.showToast("Asignatura actualizada","success"),t.modalCtrl.dismiss({updated:!0}))}catch(e){yield o.dismiss(),console.error("\u274c Error:",e),yield t.showToast("Error al guardar","danger")}})()}showToast(t,o){var e=this;return(0,g.A)(function*(){(yield e.toastCtrl.create({message:t,duration:2e3,color:o})).present()})()}get nombre(){return this.asignaturaForm.get("nombre")}get codigo(){return this.asignaturaForm.get("codigo")}get grupo(){return this.asignaturaForm.get("grupo")}get nivel(){return this.asignaturaForm.get("nivel")}get periodo(){return this.asignaturaForm.get("periodo")}get creditos(){return this.asignaturaForm.get("creditos")}get modalidad(){return this.asignaturaForm.get("modalidad")}get color(){return this.asignaturaForm.get("color")}static{this.\u0275fac=function(o){return new(o||i)(n.rXU(l.ok),n.rXU(h.w),n.rXU(a.Xi),n.rXU(a.K_),n.rXU(a.W3))}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["app-editar"]],inputs:{asignatura:"asignatura"},decls:83,vars:6,consts:[["color","primary"],["slot","start"],[3,"click"],["name","close-outline"],["slot","end"],[3,"click","disabled"],["name","save-outline"],[1,"editar-container"],[3,"formGroup"],["position","stacked"],["formControlName","nombre","placeholder","Ej: C\xe1lculo I"],["formControlName","codigo","placeholder","Ej: MAT101"],["formControlName","grupo","placeholder","Ej: A"],["formControlName","facultad","placeholder","Ej: Ingenier\xeda"],["formControlName","programa","placeholder","Ej: Ingenier\xeda de Sistemas"],["formControlName","localidad","placeholder","Ej: Campus Principal"],["formControlName","nivel","placeholder","Ej: Pregrado"],["formControlName","periodo","placeholder","Ej: 2025-1"],["formControlName","creditos","type","number","min","1","max","10"],["formControlName","modalidad","interface","popover"],[3,"value",4,"ngFor","ngForOf"],["formControlName","aula","placeholder","Ej: Laboratorio 301"],["formControlName","color","interface","popover"],["class","color-preview",4,"ngIf"],[1,"button-container"],["expand","block",3,"click","disabled"],["name","save-outline","slot","start"],[3,"value"],[1,"color-preview"],[1,"preview-badge"]],template:function(o,e){1&o&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),n.bIt("click",function(){return e.cerrar()}),n.nrm(4,"ion-icon",3),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6,"Editar Asignatura"),n.k0s(),n.j41(7,"ion-buttons",4)(8,"ion-button",5),n.bIt("click",function(){return e.guardar()}),n.nrm(9,"ion-icon",6),n.k0s()()()(),n.j41(10,"ion-content")(11,"div",7)(12,"form",8)(13,"ion-card")(14,"ion-card-header")(15,"ion-card-title"),n.EFF(16,"Informaci\xf3n B\xe1sica"),n.k0s()(),n.j41(17,"ion-card-content")(18,"ion-item")(19,"ion-label",9),n.EFF(20,"Nombre de la Asignatura *"),n.k0s(),n.nrm(21,"ion-input",10),n.k0s(),n.j41(22,"ion-item")(23,"ion-label",9),n.EFF(24,"C\xf3digo *"),n.k0s(),n.nrm(25,"ion-input",11),n.k0s(),n.j41(26,"ion-item")(27,"ion-label",9),n.EFF(28,"Grupo *"),n.k0s(),n.nrm(29,"ion-input",12),n.k0s(),n.j41(30,"ion-item")(31,"ion-label",9),n.EFF(32,"Facultad"),n.k0s(),n.nrm(33,"ion-input",13),n.k0s(),n.j41(34,"ion-item")(35,"ion-label",9),n.EFF(36,"Programa"),n.k0s(),n.nrm(37,"ion-input",14),n.k0s(),n.j41(38,"ion-item")(39,"ion-label",9),n.EFF(40,"Localidad / CDS"),n.k0s(),n.nrm(41,"ion-input",15),n.k0s()()(),n.j41(42,"ion-card")(43,"ion-card-header")(44,"ion-card-title"),n.EFF(45,"Detalles Acad\xe9micos"),n.k0s()(),n.j41(46,"ion-card-content")(47,"ion-item")(48,"ion-label",9),n.EFF(49,"Nivel *"),n.k0s(),n.nrm(50,"ion-input",16),n.k0s(),n.j41(51,"ion-item")(52,"ion-label",9),n.EFF(53,"Periodo *"),n.k0s(),n.nrm(54,"ion-input",17),n.k0s(),n.j41(55,"ion-item")(56,"ion-label",9),n.EFF(57,"Cr\xe9ditos *"),n.k0s(),n.nrm(58,"ion-input",18),n.k0s(),n.j41(59,"ion-item")(60,"ion-label",9),n.EFF(61,"Modalidad *"),n.k0s(),n.j41(62,"ion-select",19),n.DNE(63,_,2,2,"ion-select-option",20),n.k0s()(),n.j41(64,"ion-item")(65,"ion-label",9),n.EFF(66,"Aula"),n.k0s(),n.nrm(67,"ion-input",21),n.k0s()()(),n.j41(68,"ion-card")(69,"ion-card-header")(70,"ion-card-title"),n.EFF(71,"Personalizaci\xf3n"),n.k0s()(),n.j41(72,"ion-card-content")(73,"ion-item")(74,"ion-label",9),n.EFF(75,"Color"),n.k0s(),n.j41(76,"ion-select",22),n.DNE(77,b,2,2,"ion-select-option",20),n.k0s()(),n.DNE(78,C,5,3,"div",23),n.k0s()(),n.j41(79,"div",24)(80,"ion-button",25),n.bIt("click",function(){return e.guardar()}),n.nrm(81,"ion-icon",26),n.EFF(82," Guardar Cambios "),n.k0s()()()()()),2&o&&(n.R7$(8),n.Y8G("disabled",null==e.asignaturaForm?null:e.asignaturaForm.invalid),n.R7$(4),n.Y8G("formGroup",e.asignaturaForm),n.R7$(51),n.Y8G("ngForOf",e.modalidades),n.R7$(14),n.Y8G("ngForOf",e.colores),n.R7$(),n.Y8G("ngIf",null==e.color?null:e.color.value),n.R7$(2),n.Y8G("disabled",null==e.asignaturaForm?null:e.asignaturaForm.invalid))},dependencies:[u.MD,u.Sq,u.bT,l.YN,l.qT,l.BC,l.cb,l.X1,l.j4,l.JD,a.eU,a.ai,a.BC,a.QW,a.Jm,a.iq,a.W9,a.b_,a.I9,a.ME,a.tN,a.uz,a.he,a.$w,a.Nm,a.Ip],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:50vh;gap:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.editar-container[_ngcontent-%COMP%]{padding:16px;max-width:600px;margin:0 auto}ion-card[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 2px 12px #00000014;margin-bottom:16px}ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1e293b}ion-item[_ngcontent-%COMP%]{--background: transparent;--border-color: #e2e8f0;--padding-start: 0;margin-bottom:16px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:600;color:#475569;margin-bottom:8px}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;border:2px solid #e2e8f0;border-radius:8px;margin-top:8px}.color-preview[_ngcontent-%COMP%]{margin-top:20px}.color-preview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#64748b;margin-bottom:12px}.preview-badge[_ngcontent-%COMP%]{padding:12px 20px;border-radius:12px;color:#fff;font-weight:700;text-align:center;box-shadow:0 2px 8px #00000026}.button-container[_ngcontent-%COMP%]{padding:20px 0}.button-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 12px;height:48px;font-weight:700}"]})}}return i})();var p=d(375),O=d(7705),v=d(1339),k=d(9758);const M=()=>[1,2,3];function F(i,c){1&i&&(n.j41(0,"ion-card",23)(1,"ion-card-content")(2,"div",24),n.nrm(3,"div",25),n.j41(4,"div",26),n.nrm(5,"ion-skeleton-text",27)(6,"ion-skeleton-text",28),n.k0s()()()()),2&i&&(n.R7$(5),n.Y8G("animated",!0),n.R7$(),n.Y8G("animated",!0))}function w(i,c){if(1&i){const t=n.RV6();n.j41(0,"ion-card",23)(1,"ion-card-content")(2,"div",29)(3,"div",24)(4,"ion-avatar",30),n.nrm(5,"img",31),n.k0s(),n.j41(6,"div",32)(7,"h2",33),n.EFF(8),n.k0s(),n.j41(9,"div",34),n.nrm(10,"ion-icon",35),n.EFF(11),n.k0s()()(),n.j41(12,"div",36)(13,"ion-button",37),n.bIt("click",function(){p.eBV(t);const e=n.XpG();return p.Njj(e.editarPerfil())}),n.nrm(14,"ion-icon",38),n.EFF(15," Editar Perfil "),n.k0s(),n.j41(16,"ion-button",39),n.bIt("click",function(){p.eBV(t);const e=n.XpG();return p.Njj(e.logout())}),n.nrm(17,"ion-icon",40),n.EFF(18," Cerrar Sesi\xf3n "),n.k0s()()()()()}if(2&i){const t=n.XpG();n.R7$(5),n.Y8G("src",t.getAvatarUrl(),n.B4B)("alt",t.getNombreCompleto()),n.R7$(3),n.JRh(t.getNombreCompleto()),n.R7$(3),n.SpI(" ",t.docente.email," ")}}function y(i,c){if(1&i&&(n.j41(0,"ion-badge",1),n.EFF(1),n.k0s()),2&i){const t=n.XpG();n.R7$(),n.JRh(t.asignaturas.length)}}function j(i,c){if(1&i&&(n.j41(0,"ion-select-option",48),n.EFF(1),n.k0s()),2&i){const t=c.$implicit,o=n.XpG(2);n.Y8G("value",t),n.R7$(),n.Lme(" ",t," (",o.getAsignaturasPorPeriodo(t),") ")}}function E(i,c){if(1&i){const t=n.RV6();n.j41(0,"div",41)(1,"div",42),n.nrm(2,"ion-icon",43),n.j41(3,"span"),n.EFF(4,"Filtrar por periodo:"),n.k0s()(),n.j41(5,"ion-item",44)(6,"ion-select",45),n.bIt("ionChange",function(e){p.eBV(t);const r=n.XpG();return p.Njj(r.onPeriodoChange(e))}),n.j41(7,"ion-select-option",46),n.EFF(8),n.k0s(),n.DNE(9,j,2,3,"ion-select-option",47),n.k0s()()()}if(2&i){const t=n.XpG();n.R7$(6),n.Y8G("value",t.periodoSeleccionado),n.R7$(2),n.SpI(" Todos (",t.asignaturas.length,") "),n.R7$(),n.Y8G("ngForOf",t.periodos)}}function I(i,c){1&i&&(n.j41(0,"div",51),n.nrm(1,"div",52),n.j41(2,"div",53),n.nrm(3,"ion-skeleton-text",54)(4,"ion-skeleton-text",55)(5,"ion-skeleton-text",56),n.k0s()()),2&i&&(n.R7$(3),n.Y8G("animated",!0),n.R7$(),n.Y8G("animated",!0),n.R7$(),n.Y8G("animated",!0))}function R(i,c){1&i&&(n.j41(0,"div",49),n.DNE(1,I,6,3,"div",50),n.k0s()),2&i&&(n.R7$(),n.Y8G("ngForOf",n.lJ4(1,M)))}function z(i,c){if(1&i){const t=n.RV6();n.j41(0,"div",57)(1,"div",58),n.nrm(2,"ion-icon",59),n.k0s(),n.j41(3,"h4"),n.EFF(4,"No tienes asignaturas registradas"),n.k0s(),n.j41(5,"p"),n.EFF(6,"Crea tu primera asignatura para comenzar a gestionar la asistencia de tus estudiantes"),n.k0s(),n.j41(7,"ion-button",60),n.bIt("click",function(){p.eBV(t);const e=n.XpG();return p.Njj(e.crearAsignatura())}),n.nrm(8,"ion-icon",18),n.EFF(9," Crear mi primera asignatura "),n.k0s()()}}function A(i,c){if(1&i&&(n.j41(0,"div",61),n.nrm(1,"ion-icon",62),n.j41(2,"h4"),n.EFF(3),n.k0s(),n.j41(4,"p"),n.EFF(5,"Selecciona otro periodo o crea una nueva asignatura"),n.k0s()()),2&i){const t=n.XpG();n.R7$(3),n.SpI("No hay asignaturas en ",t.periodoSeleccionado)}}function $(i,c){if(1&i){const t=n.RV6();n.j41(0,"div",64),n.bIt("click",function(){const e=p.eBV(t).$implicit,r=n.XpG(2);return p.Njj(r.verAsignatura(e))}),n.nrm(1,"div",65),n.j41(2,"div",66)(3,"div",67)(4,"div",68),n.nrm(5,"ion-icon",15),n.k0s(),n.j41(6,"div",69)(7,"h4",70),n.EFF(8),n.k0s(),n.j41(9,"div",71)(10,"span",72),n.nrm(11,"ion-icon",73),n.EFF(12),n.k0s(),n.j41(13,"span",72),n.nrm(14,"ion-icon",74),n.EFF(15),n.k0s(),n.j41(16,"span",72),n.nrm(17,"ion-icon",75),n.EFF(18),n.k0s()(),n.j41(19,"div",76)(20,"ion-chip",77),n.nrm(21,"ion-icon",78),n.j41(22,"ion-label"),n.EFF(23),n.k0s()(),n.j41(24,"ion-chip",79),n.nrm(25,"ion-icon",15),n.j41(26,"ion-label"),n.EFF(27),n.k0s()(),n.j41(28,"ion-chip",80),n.nrm(29,"ion-icon",81),n.j41(30,"ion-label"),n.EFF(31),n.k0s()()()()(),n.j41(32,"div",82),n.nrm(33,"ion-icon",83),n.k0s()()()}if(2&i){const t=c.$implicit;n.xc7("animation-delay",.05*c.index+"s"),n.R7$(),n.xc7("background",t.color),n.R7$(3),n.xc7("background",t.color),n.R7$(4),n.JRh(t.nombre),n.R7$(4),n.SpI(" ",t.codigo," "),n.R7$(3),n.SpI(" Grupo ",t.grupo," "),n.R7$(3),n.SpI(" Nivel ",t.nivel," "),n.R7$(2),n.xc7("--background",t.color+"20")("color",t.color),n.R7$(3),n.JRh(t.periodo),n.R7$(4),n.SpI("",t.creditos," cr\xe9ditos"),n.R7$(4),n.JRh(t.modalidad)}}function G(i,c){if(1&i&&(n.j41(0,"div",49),n.DNE(1,$,34,17,"div",63),n.k0s()),2&i){const t=n.XpG();n.R7$(),n.Y8G("ngForOf",t.asignaturasFiltradas)}}let N=(()=>{class i{constructor(t,o,e,r,m,T,Y){this.authService=t,this.supabase=o,this.router=e,this.loadingController=r,this.alertController=m,this.modalController=T,this.cdr=Y,this.docente=null,this.asignaturas=[],this.asignaturasFiltradas=[],this.loadingProfile=!0,this.loadingAsignaturas=!0,this.periodos=[],this.periodoSeleccionado="todos",(0,f.d)({personCircleOutline:s.kki,mailOutline:s.SM1,callOutline:s.bNN,businessOutline:s.FL4,schoolOutline:s.ROU,briefcaseOutline:s.vOb,addCircleOutline:s.CDT,bookOutline:s.AiO,peopleOutline:s.wx_,barChartOutline:s.Yv$,logOutOutline:s.z_V,refreshOutline:s.mVv,codeOutline:s.abl,chevronForwardOutline:s.N05,calendarOutline:s.RXF,createOutline:s.hmR,funnelOutline:s.Ptu,desktopOutline:s.z6c})}ngOnInit(){var t=this;return(0,g.A)(function*(){yield t.loadAllData()})()}ionViewWillEnter(){var t=this;return(0,g.A)(function*(){yield t.loadAllData()})()}loadAllData(){var t=this;return(0,g.A)(function*(){console.log("\u{1f504} Iniciando carga de datos..."),yield t.loadDocenteInfo(),yield t.loadAsignaturas(),console.log("\u2705 Carga completada")})()}loadDocenteInfo(){var t=this;return(0,g.A)(function*(){t.loadingProfile=!0;try{const{data:{user:o}}=yield t.supabase.auth.getUser();if(!o)return console.error("\u274c No hay usuario autenticado"),void t.router.navigate(["/auth/login"]);console.log("\u{1f464} Usuario ID:",o.id);const{data:e,error:r}=yield t.supabase.from("docentes").select("*").eq("user_id",o.id).single();if(r)throw r;t.docente=e,console.log("\u2705 Docente cargado:",t.docente),t.cdr.detectChanges()}catch(o){console.error("\u274c Error cargando docente:",o),yield t.showAlert("Error","No se pudo cargar la informaci\xf3n del perfil")}finally{t.loadingProfile=!1,t.cdr.detectChanges()}})()}editarPerfil(){var t=this;return(0,g.A)(function*(){const o=yield t.modalController.create({component:P,componentProps:{docente:t.docente},breakpoints:[0,.5,.75,.95],initialBreakpoint:.95});yield o.present();const{data:e}=yield o.onWillDismiss();e?.updated&&(t.docente=e.data,t.cdr.detectChanges())})()}loadAsignaturas(){var t=this;return(0,g.A)(function*(){t.loadingAsignaturas=!0;try{if(!t.docente?.id)return console.warn("\u26a0\ufe0f No hay docente_id disponible, esperando..."),t.asignaturas=[],void(t.asignaturasFiltradas=[]);console.log("\u{1f4da} Buscando asignaturas para docente_id:",t.docente.id);const{data:o,error:e}=yield t.supabase.from("asignaturas").select("*").eq("docente_id",t.docente.id).order("created_at",{ascending:!1});if(e)throw console.error("\u274c Error en query:",e),e;t.asignaturas=o||[],console.log("\u2705 Asignaturas cargadas:",t.asignaturas.length),console.log("\u{1f4ca} Datos:",t.asignaturas),t.extraerPeriodos(),t.filtrarAsignaturas(),t.cdr.detectChanges()}catch(o){console.error("\u274c Error cargando asignaturas:",o),t.asignaturas=[],t.asignaturasFiltradas=[]}finally{t.loadingAsignaturas=!1,t.cdr.detectChanges()}})()}extraerPeriodos(){const t=[...new Set(this.asignaturas.map(o=>o.periodo))];this.periodos=t.sort().reverse(),this.periodos.length>0&&"todos"===this.periodoSeleccionado&&(this.periodoSeleccionado=this.periodos[0]),console.log("\u{1f4c5} Periodos encontrados:",this.periodos)}filtrarAsignaturas(){this.asignaturasFiltradas="todos"===this.periodoSeleccionado?this.asignaturas:this.asignaturas.filter(t=>t.periodo===this.periodoSeleccionado),console.log("\u{1f50d} Asignaturas filtradas:",this.asignaturasFiltradas.length),this.cdr.detectChanges()}onPeriodoChange(t){this.periodoSeleccionado=t.detail.value,this.filtrarAsignaturas()}getAsignaturasPorPeriodo(t){return this.asignaturas.filter(o=>o.periodo===t).length}handleRefresh(t){var o=this;return(0,g.A)(function*(){console.log("\u{1f504} Refrescando datos..."),yield o.loadAllData(),t.target.complete()})()}crearAsignatura(){this.router.navigate(["/asignaturas/crear"])}verAsignatura(t){this.router.navigate(["/asignaturas/detalle",t.id])}logout(){var t=this;return(0,g.A)(function*(){yield(yield t.alertController.create({header:"Cerrar sesi\xf3n",message:"\xbfEst\xe1s seguro que deseas cerrar sesi\xf3n?",buttons:[{text:"Cancelar",role:"cancel"},{text:"S\xed, cerrar sesi\xf3n",role:"confirm",handler:()=>{t.authService.logout()}}]})).present()})()}showAlert(t,o){var e=this;return(0,g.A)(function*(){yield(yield e.alertController.create({header:t,message:o,buttons:["OK"]})).present()})()}getInitials(){return this.docente?`${this.docente.nombres?.charAt(0)?.toUpperCase()||""}${this.docente.apellidos?.charAt(0)?.toUpperCase()||""}`:"U"}getAvatarUrl(){return this.docente?.foto_url?this.docente.foto_url:`https://ui-avatars.com/api/?name=${this.getInitials()}&background=3b82f6&color=fff&size=200&bold=true&rounded=true`}getNombreCompleto(){return this.docente?`${this.docente.nombres} ${this.docente.apellidos}`:"Cargando..."}static{this.\u0275fac=function(o){return new(o||i)(n.rXU(v.u),n.rXU(h.w),n.rXU(k.Ix),n.rXU(a.Xi),n.rXU(a.hG),n.rXU(a.W3),n.rXU(O.gRc))}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["app-home"]],decls:29,vars:10,consts:[[3,"translucent"],["color","primary"],[1,"header-content"],[1,"app-info"],[1,"app-title"],[1,"version-badge"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["pullingIcon","refresh-outline","pullingText","Desliza para actualizar","refreshingSpinner","crescent","refreshingText","Actualizando..."],[1,"home-container"],[1,"profile-section"],["class","profile-card",4,"ngIf"],[1,"asignaturas-section"],[1,"section-header"],[1,"section-title"],["name","book-outline"],["color","primary",4,"ngIf"],["size","default",1,"add-button",3,"click"],["name","add-circle-outline","slot","start"],["class","filter-section",4,"ngIf"],["class","asignaturas-list",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","empty-filter-state",4,"ngIf"],[1,"profile-card"],[1,"profile-header"],[1,"skeleton-avatar"],[1,"skeleton-info"],[2,"width","60%","height","24px","margin-bottom","8px",3,"animated"],[2,"width","80%","height","16px",3,"animated"],[1,"profile-header-wrapper"],[1,"profile-avatar"],[3,"src","alt"],[1,"profile-info"],[1,"profile-name"],[1,"profile-email"],["name","mail-outline"],[1,"profile-actions"],["fill","solid","color","primary",1,"action-button","edit-button",3,"click"],["name","create-outline","slot","start"],["fill","outline","color","danger",1,"action-button","logout-button-header",3,"click"],["name","log-out-outline","slot","start"],[1,"filter-section"],[1,"filter-header"],["name","funnel-outline"],["lines","none",1,"filter-select"],["interface","action-sheet","placeholder","Selecciona un periodo",3,"ionChange","value"],["value","todos"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"asignaturas-list"],["class","asignatura-item skeleton-item",4,"ngFor","ngForOf"],[1,"asignatura-item","skeleton-item"],[1,"skeleton-color"],[1,"skeleton-content"],[2,"width","70%","height","20px","margin-bottom","8px",3,"animated"],[2,"width","40%","height","16px","margin-bottom","8px",3,"animated"],[2,"width","90%","height","14px",3,"animated"],[1,"empty-state"],[1,"empty-icon-container"],["name","book-outline",1,"empty-icon"],["expand","block",1,"empty-button",3,"click"],[1,"empty-filter-state"],["name","calendar-outline",1,"empty-filter-icon"],["class","asignatura-item",3,"animation-delay","click",4,"ngFor","ngForOf"],[1,"asignatura-item",3,"click"],[1,"asignatura-color"],[1,"asignatura-content"],[1,"asignatura-main"],[1,"asignatura-icon"],[1,"asignatura-info"],[1,"asignatura-nombre"],[1,"asignatura-meta"],[1,"meta-item"],["name","code-outline"],["name","people-outline"],["name","school-outline"],[1,"asignatura-badges"],[1,"info-chip"],["name","calendar-outline"],["color","success","outline","true",1,"info-chip"],["color","primary","outline","true",1,"info-chip"],["name","desktop-outline"],[1,"asignatura-arrow"],["name","chevron-forward-outline"]],template:function(o,e){1&o&&(n.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"div",2)(3,"div",3)(4,"ion-title",4),n.EFF(5,"ControlAsist"),n.k0s(),n.j41(6,"span",5),n.EFF(7,"v1.0.0"),n.k0s()()()()(),n.j41(8,"ion-content",6)(9,"ion-refresher",7),n.bIt("ionRefresh",function(m){return e.handleRefresh(m)}),n.nrm(10,"ion-refresher-content",8),n.k0s(),n.j41(11,"div",9)(12,"div",10),n.DNE(13,F,7,2,"ion-card",11)(14,w,19,4,"ion-card",11),n.k0s(),n.j41(15,"div",12)(16,"div",13)(17,"h3",14),n.nrm(18,"ion-icon",15),n.EFF(19," Mis Asignaturas "),n.DNE(20,y,2,1,"ion-badge",16),n.k0s(),n.j41(21,"ion-button",17),n.bIt("click",function(){return e.crearAsignatura()}),n.nrm(22,"ion-icon",18),n.EFF(23," Nueva "),n.k0s()(),n.DNE(24,E,10,3,"div",19)(25,R,2,2,"div",20)(26,z,10,0,"div",21)(27,A,6,1,"div",22)(28,G,2,1,"div",20),n.k0s()()()),2&o&&(n.Y8G("translucent",!0),n.R7$(8),n.Y8G("fullscreen",!0),n.R7$(5),n.Y8G("ngIf",e.loadingProfile),n.R7$(),n.Y8G("ngIf",!e.loadingProfile&&e.docente),n.R7$(6),n.Y8G("ngIf",!e.loadingAsignaturas),n.R7$(4),n.Y8G("ngIf",!e.loadingAsignaturas&&e.periodos.length>0),n.R7$(),n.Y8G("ngIf",e.loadingAsignaturas),n.R7$(),n.Y8G("ngIf",!e.loadingAsignaturas&&0===e.asignaturas.length),n.R7$(),n.Y8G("ngIf",!e.loadingAsignaturas&&e.asignaturas.length>0&&0===e.asignaturasFiltradas.length),n.R7$(),n.Y8G("ngIf",!e.loadingAsignaturas&&e.asignaturasFiltradas.length>0))},dependencies:[a.uz,u.MD,u.Sq,u.bT,a.W9,a.eU,a.ai,a.BC,a.Jm,a.iq,a.b_,a.I9,a.mC,a.ZB,a.he,a.To,a.Ki,a.ds,a.In,a.Nm,a.Ip],styles:["ion-content[_ngcontent-%COMP%]{--background: linear-gradient(180deg, #f0f9ff 0%, #e0f2fe 25%, #f8fafc 50%, #ffffff 100%)}.home-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.profile-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown .6s ease-out}.profile-card[_ngcontent-%COMP%]{border-radius:20px;box-shadow:0 4px 20px #00000014;margin-bottom:32px;background:#fff;overflow:hidden;border:1px solid rgba(226,232,240,.8)}.profile-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:28px}.profile-header-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center}.profile-avatar[_ngcontent-%COMP%]{width:90px;height:90px;margin-right:24px;border:4px solid #3b82f6;box-shadow:0 8px 20px #3b82f64d;flex-shrink:0}.profile-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.profile-info[_ngcontent-%COMP%]{flex:1;min-width:0}.profile-name[_ngcontent-%COMP%]{font-size:26px;font-weight:800;color:#1e293b;margin:0 0 8px;background:linear-gradient(135deg,#1e40af,#3b82f6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.5px;line-height:1.2}.profile-email[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin:0;display:flex;align-items:center;font-weight:500}.profile-email[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px;color:#3b82f6}.profile-actions[_ngcontent-%COMP%]{display:flex;gap:12px;padding-top:16px;border-top:2px solid #f1f5f9}.action-button[_ngcontent-%COMP%]{--border-radius: 12px;flex:1;height:48px;font-weight:600;text-transform:none;font-size:14px}.action-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.edit-button[_ngcontent-%COMP%]{box-shadow:0 4px 12px #3b82f633}.logout-button-header[_ngcontent-%COMP%]{--border-width: 2px}.logout-button-header[_ngcontent-%COMP%]:hover{--background: #fee2e2}@media(max-width:768px){.home-container[_ngcontent-%COMP%]{padding:16px}.profile-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:20px}.profile-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.profile-avatar[_ngcontent-%COMP%]{margin-right:0;margin-bottom:20px}.profile-name[_ngcontent-%COMP%]{font-size:22px}.profile-email[_ngcontent-%COMP%]{justify-content:center}.profile-actions[_ngcontent-%COMP%]{flex-direction:column}.profile-actions[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{width:100%}}.skeleton-avatar[_ngcontent-%COMP%]{width:90px;height:90px;border-radius:50%;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;margin-right:24px}.skeleton-info[_ngcontent-%COMP%]{flex:1}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.asignaturas-section[_ngcontent-%COMP%]{margin-top:24px;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out .2s both}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:16px}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:24px;font-weight:800;color:#1e293b;margin:0;letter-spacing:-.5px;gap:12px}.section-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;color:#3b82f6}.section-title[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:14px;font-weight:700;padding:6px 12px}.add-button[_ngcontent-%COMP%]{--border-radius: 12px;text-transform:none;font-weight:600;height:44px;box-shadow:0 4px 12px #3b82f633}.add-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.filter-section[_ngcontent-%COMP%]{margin-bottom:24px;animation:_ngcontent-%COMP%_fadeIn .6s ease-out .3s both}.filter-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;font-weight:600;color:#64748b;margin-bottom:10px}.filter-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#3b82f6}.filter-select[_ngcontent-%COMP%]{--background: white;--border-radius: 14px;--padding-start: 16px;--padding-end: 16px;--inner-padding-end: 0;border:2px solid #e2e8f0;border-radius:14px;box-shadow:0 2px 8px #0000000f;transition:all .3s ease}.filter-select.ion-focused[_ngcontent-%COMP%]{border-color:#3b82f6;box-shadow:0 0 0 4px #3b82f61a}.filter-select[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;width:100%}.asignaturas-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.asignatura-item[_ngcontent-%COMP%]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 4px 16px #00000014;border:1px solid rgba(226,232,240,.8);cursor:pointer;transition:all .3s ease;position:relative;animation:_ngcontent-%COMP%_slideInUp .6s ease-out both}.asignatura-item[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #0000001f}.asignatura-item[_ngcontent-%COMP%]:active{transform:scale(.98)}.asignatura-color[_ngcontent-%COMP%]{height:6px;width:100%}.asignatura-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px;gap:16px}.asignatura-main[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;flex:1;min-width:0}.asignatura-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 4px 12px #00000026}.asignatura-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#fff}.asignatura-info[_ngcontent-%COMP%]{flex:1;min-width:0}.asignatura-nombre[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1e293b;margin:0 0 10px;line-height:1.3;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.asignatura-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:12px}.meta-item[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;font-size:13px;color:#64748b;font-weight:500}.meta-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#94a3b8}.asignatura-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.info-chip[_ngcontent-%COMP%]{height:28px;font-size:12px;font-weight:600}.info-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.asignatura-arrow[_ngcontent-%COMP%]{flex-shrink:0}.asignatura-arrow[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#cbd5e1}.skeleton-item[_ngcontent-%COMP%]{cursor:default}.skeleton-item[_ngcontent-%COMP%]:hover{transform:none}.skeleton-color[_ngcontent-%COMP%]{height:6px;background:linear-gradient(90deg,#e2e8f0 25%,#f1f5f9,#e2e8f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.skeleton-content[_ngcontent-%COMP%]{padding:20px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 40px;background:#fff;border-radius:20px;box-shadow:0 4px 20px #0000000f;animation:_ngcontent-%COMP%_fadeIn .6s ease-out;border:1px solid rgba(226,232,240,.8)}.empty-icon-container[_ngcontent-%COMP%]{width:120px;height:120px;margin:0 auto 28px;background:linear-gradient(135deg,#eff6ff,#dbeafe);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 24px #3b82f626}.empty-icon[_ngcontent-%COMP%]{font-size:64px;color:#3b82f6}.empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#1e293b;margin:0 0 12px;letter-spacing:-.5px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;color:#64748b;line-height:1.6;max-width:400px;margin:0 auto 36px}.empty-button[_ngcontent-%COMP%]{--border-radius: 12px;max-width:320px;margin:0 auto;height:52px;font-weight:600;text-transform:none;box-shadow:0 4px 16px #3b82f64d}.empty-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.empty-filter-state[_ngcontent-%COMP%]{text-align:center;padding:60px 40px;background:#fff;border-radius:16px;box-shadow:0 4px 12px #0000000f;border:1px solid rgba(226,232,240,.8);animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.empty-filter-icon[_ngcontent-%COMP%]{font-size:72px;color:#cbd5e1;margin-bottom:20px}.empty-filter-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#334155;margin:0 0 10px}.empty-filter-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;color:#64748b;margin:0}.logout-section[_ngcontent-%COMP%]{max-width:500px;margin:48px auto 32px;animation:_ngcontent-%COMP%_fadeIn .6s ease-out .4s both}.logout-button[_ngcontent-%COMP%]{--border-radius: 12px;--border-width: 2px;height:52px;font-weight:600;text-transform:none;font-size:16px}.logout-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.logout-button[_ngcontent-%COMP%]:hover{--background: #fee2e2}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media(max-width:768px){.home-container[_ngcontent-%COMP%]{padding:16px}.profile-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:20px}.profile-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.profile-avatar[_ngcontent-%COMP%]{margin-right:0;margin-bottom:20px}.profile-name[_ngcontent-%COMP%]{font-size:22px}.profile-email[_ngcontent-%COMP%]{justify-content:center}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.add-button[_ngcontent-%COMP%]{width:100%}.section-title[_ngcontent-%COMP%]{font-size:20px;justify-content:space-between}.asignatura-content[_ngcontent-%COMP%]{padding:16px}.asignatura-main[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.asignatura-icon[_ngcontent-%COMP%]{width:48px;height:48px}.asignatura-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.asignatura-nombre[_ngcontent-%COMP%]{font-size:16px}.meta-item[_ngcontent-%COMP%]{font-size:12px}.empty-state[_ngcontent-%COMP%]{padding:60px 24px}.empty-icon-container[_ngcontent-%COMP%]{width:100px;height:100px}.empty-icon[_ngcontent-%COMP%]{font-size:52px}}@media(max-width:576px){.profile-avatar[_ngcontent-%COMP%]{width:80px;height:80px}.profile-name[_ngcontent-%COMP%]{font-size:20px}.section-title[_ngcontent-%COMP%]{font-size:18px}.section-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 16px}.app-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.app-title[_ngcontent-%COMP%]{padding:0;font-size:20px;font-weight:800;letter-spacing:-.5px}.version-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background:#fff3;color:#fff;font-size:11px;font-weight:700;padding:4px 10px;border-radius:12px;letter-spacing:.5px;border:1px solid rgba(255,255,255,.3);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}@media(max-width:576px){.app-title[_ngcontent-%COMP%]{font-size:18px}.version-badge[_ngcontent-%COMP%]{font-size:10px;padding:3px 8px}}"]})}}return i})()}}]);