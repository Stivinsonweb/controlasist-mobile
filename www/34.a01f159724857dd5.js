"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[34],{3034:(O,m,a)=>{a.d(m,{ResetPasswordPage:()=>b});var d=a(467),p=a(9769),s=a(5206),u=a(3049),i=a(8370),f=a(2951),r=a(5873),n=a(5547),_=a(1339),h=a(9758);const P=()=>["/auth/login"];function w(l,M){if(1&l&&(n.j41(0,"div",35),n.nrm(1,"ion-icon",36),n.j41(2,"span"),n.EFF(3),n.k0s()()),2&l){const o=n.XpG();n.R7$(3),n.JRh(null!=o.password&&o.password.hasError("required")?"La contrase\xf1a es requerida":"M\xednimo 8 caracteres")}}function C(l,M){1&l&&(n.j41(0,"div",35),n.nrm(1,"ion-icon",36),n.j41(2,"span"),n.EFF(3,"Las contrase\xf1as no coinciden"),n.k0s()())}let b=(()=>{class l{constructor(o,t,e,c,g){this.formBuilder=o,this.authService=t,this.router=e,this.loadingController=c,this.alertController=g,this.showPassword=!1,this.showConfirmPassword=!1,(0,f.d)({lockClosed:r.AaQ,lockClosedOutline:r.eso,eye:r.y5U,eyeOff:r.zsm,checkmarkDoneOutline:r.u8Q,checkmarkCircle:r.AUS,checkmarkCircleOutline:r.gz2,ellipseOutline:r.zF,alertCircle:r.nVl,informationCircle:r.rxM,arrowBackOutline:r.hGB,shieldCheckmark:r.hEE})}ngOnInit(){this.initForm()}initForm(){this.resetForm=this.formBuilder.group({password:["",[s.k0.required,s.k0.minLength(8)]],confirmPassword:["",[s.k0.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(o){const t=o.get("password")?.value,e=o.get("confirmPassword")?.value;return t===e?null:{passwordMismatch:!0}}togglePassword(){this.showPassword=!this.showPassword}toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword}hasUpperCase(o){return/[A-Z]/.test(o)}hasLowerCase(o){return/[a-z]/.test(o)}hasNumber(o){return/[0-9]/.test(o)}resetPassword(){var o=this;return(0,d.A)(function*(){if(o.resetForm.valid){const t=yield o.loadingController.create({message:"Actualizando contrase\xf1a...",spinner:"crescent"});yield t.present();try{const{password:e}=o.resetForm.value,c=yield o.authService.updatePassword(e);yield t.dismiss(),c.success?yield(yield o.alertController.create({header:"\u2713 Contrase\xf1a actualizada",message:"Tu contrase\xf1a ha sido actualizada exitosamente. Ahora puedes iniciar sesi\xf3n con tu nueva contrase\xf1a.",buttons:[{text:"Ir al login",handler:()=>{o.router.navigate(["/auth/login"])}}],cssClass:"success-alert"})).present():yield o.showAlert("Error",c.error||"No se pudo actualizar la contrase\xf1a")}catch(e){yield t.dismiss(),yield o.showAlert("Error",e.message||"Error al actualizar la contrase\xf1a")}}else o.resetForm.hasError("passwordMismatch")?yield o.showAlert("Error","Las contrase\xf1as no coinciden"):yield o.showAlert("Formulario inv\xe1lido","Por favor completa todos los campos correctamente")})()}showAlert(o,t){var e=this;return(0,d.A)(function*(){yield(yield e.alertController.create({header:o,message:t,buttons:["OK"]})).present()})()}get password(){return this.resetForm.get("password")}get confirmPassword(){return this.resetForm.get("confirmPassword")}static{this.\u0275fac=function(t){return new(t||l)(n.rXU(s.ok),n.rXU(_.u),n.rXU(h.Ix),n.rXU(i.Xi),n.rXU(i.hG))}}static{this.\u0275cmp=n.VBU({type:l,selectors:[["app-reset-password"]],decls:64,vars:27,consts:[[3,"fullscreen"],[1,"reset-container"],[1,"header-section"],[1,"logo-container"],["name","lock-closed",1,"logo-icon"],[1,"app-title"],[1,"app-subtitle"],[1,"form-container"],[1,"reset-card"],[1,"form-header"],[1,"form-title"],[1,"form-subtitle"],[3,"ngSubmit","formGroup"],[1,"input-group"],[1,"input-label"],["name","lock-closed-outline",1,"label-icon"],["lines","none",1,"custom-item"],["formControlName","password","placeholder","M\xednimo 8 caracteres",1,"custom-input",3,"type"],["name","lock-closed","slot","start",1,"input-icon"],["slot","end",1,"toggle-password",3,"click","name"],["class","error-message",4,"ngIf"],["name","checkmark-circle-outline",1,"label-icon"],["formControlName","confirmPassword","placeholder","Repite la contrase\xf1a",1,"custom-input",3,"type"],["name","checkmark-circle","slot","start",1,"input-icon"],[1,"info-box"],["name","information-circle",1,"info-icon"],[3,"name"],["expand","block","type","submit",1,"reset-button",3,"disabled"],["name","checkmark-done-outline","slot","start"],[1,"back-to-login"],[1,"back-link",3,"routerLink"],["name","arrow-back-outline"],[1,"footer-section"],[1,"footer-text"],["name","shield-checkmark",1,"footer-icon"],[1,"error-message"],["name","alert-circle",1,"error-icon"]],template:function(t,e){1&t&&(n.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3),n.nrm(4,"ion-icon",4),n.k0s(),n.j41(5,"h1",5),n.EFF(6,"Nueva Contrase\xf1a"),n.k0s(),n.j41(7,"p",6),n.EFF(8,"Crea una contrase\xf1a segura para tu cuenta"),n.k0s()(),n.j41(9,"div",7)(10,"ion-card",8)(11,"ion-card-content")(12,"div",9)(13,"h2",10),n.EFF(14,"Restablecer Contrase\xf1a"),n.k0s(),n.j41(15,"p",11),n.EFF(16,"Ingresa tu nueva contrase\xf1a"),n.k0s()(),n.j41(17,"form",12),n.bIt("ngSubmit",function(){return e.resetPassword()}),n.j41(18,"div",13)(19,"ion-label",14),n.nrm(20,"ion-icon",15),n.EFF(21," Nueva Contrase\xf1a "),n.k0s(),n.j41(22,"ion-item",16)(23,"ion-input",17),n.nrm(24,"ion-icon",18),n.j41(25,"ion-icon",19),n.bIt("click",function(){return e.togglePassword()}),n.k0s()()(),n.DNE(26,w,4,1,"div",20),n.k0s(),n.j41(27,"div",13)(28,"ion-label",14),n.nrm(29,"ion-icon",21),n.EFF(30," Confirmar Contrase\xf1a "),n.k0s(),n.j41(31,"ion-item",16)(32,"ion-input",22),n.nrm(33,"ion-icon",23),n.j41(34,"ion-icon",19),n.bIt("click",function(){return e.toggleConfirmPassword()}),n.k0s()()(),n.DNE(35,C,4,0,"div",20),n.k0s(),n.j41(36,"div",24)(37,"h4"),n.nrm(38,"ion-icon",25),n.EFF(39," Tu contrase\xf1a debe contener: "),n.k0s(),n.j41(40,"ul")(41,"li"),n.nrm(42,"ion-icon",26),n.EFF(43," Al menos 8 caracteres "),n.k0s(),n.j41(44,"li"),n.nrm(45,"ion-icon",26),n.EFF(46," Una letra may\xfascula "),n.k0s(),n.j41(47,"li"),n.nrm(48,"ion-icon",26),n.EFF(49," Una letra min\xfascula "),n.k0s(),n.j41(50,"li"),n.nrm(51,"ion-icon",26),n.EFF(52," Un n\xfamero "),n.k0s()()(),n.j41(53,"ion-button",27),n.nrm(54,"ion-icon",28),n.EFF(55," Actualizar Contrase\xf1a "),n.k0s(),n.j41(56,"div",29)(57,"a",30),n.nrm(58,"ion-icon",31),n.EFF(59," Volver al inicio de sesi\xf3n "),n.k0s()()()()()(),n.j41(60,"div",32)(61,"p",33),n.nrm(62,"ion-icon",34),n.EFF(63," Conexi\xf3n segura y cifrada "),n.k0s()()()()),2&t&&(n.Y8G("fullscreen",!0),n.R7$(17),n.Y8G("formGroup",e.resetForm),n.R7$(5),n.AVh("item-error",(null==e.password?null:e.password.invalid)&&(null==e.password?null:e.password.touched)),n.R7$(),n.Y8G("type",e.showPassword?"text":"password"),n.R7$(2),n.Y8G("name",e.showPassword?"eye-off":"eye"),n.R7$(),n.Y8G("ngIf",(null==e.password?null:e.password.invalid)&&(null==e.password?null:e.password.touched)),n.R7$(5),n.AVh("item-error",((null==e.confirmPassword?null:e.confirmPassword.invalid)||e.resetForm.hasError("passwordMismatch"))&&(null==e.confirmPassword?null:e.confirmPassword.touched)),n.R7$(),n.Y8G("type",e.showConfirmPassword?"text":"password"),n.R7$(2),n.Y8G("name",e.showConfirmPassword?"eye-off":"eye"),n.R7$(),n.Y8G("ngIf",(null==e.confirmPassword?null:e.confirmPassword.touched)&&e.resetForm.hasError("passwordMismatch")),n.R7$(6),n.AVh("valid",(null==e.password||null==e.password.value?null:e.password.value.length)>=8),n.R7$(),n.Y8G("name",(null==e.password||null==e.password.value?null:e.password.value.length)>=8?"checkmark-circle":"ellipse-outline"),n.R7$(2),n.AVh("valid",e.hasUpperCase(null==e.password?null:e.password.value)),n.R7$(),n.Y8G("name",e.hasUpperCase(null==e.password?null:e.password.value)?"checkmark-circle":"ellipse-outline"),n.R7$(2),n.AVh("valid",e.hasLowerCase(null==e.password?null:e.password.value)),n.R7$(),n.Y8G("name",e.hasLowerCase(null==e.password?null:e.password.value)?"checkmark-circle":"ellipse-outline"),n.R7$(2),n.AVh("valid",e.hasNumber(null==e.password?null:e.password.value)),n.R7$(),n.Y8G("name",e.hasNumber(null==e.password?null:e.password.value)?"checkmark-circle":"ellipse-outline"),n.R7$(2),n.Y8G("disabled",e.resetForm.invalid),n.R7$(4),n.Y8G("routerLink",n.lJ4(26,P)))},dependencies:[p.MD,p.bT,s.YN,s.qT,s.BC,s.cb,s.X1,s.j4,s.JD,u.iI,u.Wk,i.W9,i.b_,i.I9,i.uz,i.he,i.$w,i.Jm,i.iq],styles:["ion-content[_ngcontent-%COMP%]{--background: #f8fafc}.reset-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;padding:20px;background:linear-gradient(180deg,#f0f9ff,#e0f2fe,#f8fafc 50%,#fff)}.header-section[_ngcontent-%COMP%]{text-align:center;padding:40px 0 30px;animation:_ngcontent-%COMP%_fadeInDown .6s ease-out}.logo-container[_ngcontent-%COMP%]{width:100px;height:100px;margin:0 auto 24px;background:linear-gradient(135deg,#10b981,#059669);border-radius:24px;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 40px #10b9814d;border:3px solid rgba(255,255,255,.5)}.logo-icon[_ngcontent-%COMP%]{font-size:64px;color:#fff;filter:drop-shadow(0 4px 8px rgba(0,0,0,.2))}.app-title[_ngcontent-%COMP%]{font-size:36px;font-weight:800;background:linear-gradient(135deg,#047857,#10b981);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0 0 8px;letter-spacing:-1px}.app-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin:0;font-weight:500}.form-container[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out;padding:20px 0}.reset-card[_ngcontent-%COMP%]{width:100%;max-width:480px;border-radius:24px;box-shadow:0 4px 6px #0000000d,0 10px 15px #0000001a;background:#fff;margin:0;border:1px solid rgba(226,232,240,.8)}ion-card-content[_ngcontent-%COMP%]{padding:40px 32px}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.form-title[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#1e293b;margin:0 0 8px}.form-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin:0}.input-group[_ngcontent-%COMP%]{margin-bottom:24px}.input-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px;font-weight:600;color:#334155;margin-bottom:8px}.label-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:8px;color:#10b981}.custom-item[_ngcontent-%COMP%]{--border-radius: 12px;--background: #f8fafc;--padding-start: 16px;--padding-end: 16px;border:2px solid #e2e8f0;transition:all .3s ease}.custom-item[_ngcontent-%COMP%]:focus-within{--background: white;border-color:#10b981;box-shadow:0 0 0 4px #10b9811a}.custom-item.item-error[_ngcontent-%COMP%]{border-color:#ef4444;--background: #fef2f2}.custom-input[_ngcontent-%COMP%]{--padding-start: 0;font-size:15px}.input-icon[_ngcontent-%COMP%]{font-size:20px;color:#94a3b8;margin-right:12px}.toggle-password[_ngcontent-%COMP%]{font-size:22px;color:#64748b;cursor:pointer;transition:color .2s}.toggle-password[_ngcontent-%COMP%]:hover{color:#10b981}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:8px;font-size:12px;color:#ef4444;animation:_ngcontent-%COMP%_shake .3s}.error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:16px;margin-right:6px}.info-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ecfdf5,#d1fae5);border-left:4px solid #10b981;border-radius:12px;padding:20px;margin:24px 0}.info-box[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 0 16px;font-size:14px;font-weight:600;color:#065f46}.info-box[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:8px}.info-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.info-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:13px;margin-bottom:10px;color:#047857;transition:all .3s ease}.info-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.valid[_ngcontent-%COMP%]{color:#10b981;font-weight:600}.info-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:10px;color:#94a3b8}.info-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.valid[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#10b981}.reset-button[_ngcontent-%COMP%]{--border-radius: 12px;--background: linear-gradient(135deg, #10b981 0%, #059669 100%);height:54px;font-weight:600;text-transform:none;font-size:16px;margin-top:8px;box-shadow:0 4px 14px #10b98166;transition:all .3s ease}.reset-button[_ngcontent-%COMP%]:hover:not([disabled]){transform:translateY(-2px);box-shadow:0 8px 20px #10b98180}.reset-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.back-to-login[_ngcontent-%COMP%]{text-align:center;margin-top:24px}.back-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;font-size:14px;color:#64748b;text-decoration:none;font-weight:600;cursor:pointer;transition:all .2s;padding:8px 12px;border-radius:8px}.back-link[_ngcontent-%COMP%]:hover{color:#10b981;background:#f0fdf4}.back-link[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:6px}.footer-section[_ngcontent-%COMP%]{text-align:center;padding:24px 0;animation:_ngcontent-%COMP%_fadeIn .6s ease-out .3s both}.footer-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:13px;color:#64748b;margin:0;font-weight:500}.footer-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:8px;color:#10b981}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}@media(max-width:576px){.header-section[_ngcontent-%COMP%]{padding:30px 0 20px}ion-card-content[_ngcontent-%COMP%]{padding:32px 24px}}"]})}}return l})()}}]);