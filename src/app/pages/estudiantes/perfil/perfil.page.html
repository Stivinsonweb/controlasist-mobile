<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/estudiante/home"></ion-back-button>
    </ion-buttons>
    <ion-title color="light">Mi Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="perfil-container">

    <div class="avatar-section" *ngIf="estudiante">
      <div class="avatar" [style.background]="estudiante.avatar_color">
        {{ estudiante.iniciales }}
      </div>
      <h2>{{ estudiante.nombres }} {{ estudiante.apellidos }}</h2>
      <p>{{ estudiante.email }}</p>
    </div>

    <ion-card class="form-card">
      <ion-card-content>
        <form [formGroup]="perfilForm">

          <h3>Información Personal</h3>

          <ion-item lines="none" class="input-item">
            <ion-label position="stacked">Nombres *</ion-label>
            <ion-input formControlName="nombres" placeholder="Tus nombres">
              <ion-icon name="person-outline" slot="start"></ion-icon>
            </ion-input>
          </ion-item>

          <ion-item lines="none" class="input-item">
            <ion-label position="stacked">Apellidos *</ion-label>
            <ion-input formControlName="apellidos" placeholder="Tus apellidos">
              <ion-icon name="person-outline" slot="start"></ion-icon>
            </ion-input>
          </ion-item>

          <ion-item lines="none" class="input-item">
            <ion-label position="stacked">Tipo de Documento</ion-label>
            <ion-select formControlName="tipo_documento" interface="popover">
              <ion-select-option value="CC">Cédula de Ciudadanía</ion-select-option>
              <ion-select-option value="TI">Tarjeta de Identidad</ion-select-option>
              <ion-select-option value="CE">Cédula de Extranjería</ion-select-option>
              <ion-select-option value="PAS">Pasaporte</ion-select-option>
            </ion-select>
          </ion-item>

          <ion-item lines="none" class="input-item">
            <ion-label position="stacked">Número de Documento</ion-label>
            <ion-input formControlName="cedula" placeholder="Número de documento">
              <ion-icon name="card-outline" slot="start"></ion-icon>
            </ion-input>
          </ion-item>

          <ion-item lines="none" class="input-item">
            <ion-label position="stacked">Teléfono</ion-label>
            <ion-input formControlName="telefono" type="tel" placeholder="Número de teléfono">
              <ion-icon name="call-outline" slot="start"></ion-icon>
            </ion-input>
          </ion-item>

          <ion-item lines="none" class="input-item">
            <ion-label position="stacked">Programa Académico</ion-label>
            <ion-input formControlName="programa" placeholder="Ej: Ingeniería de Sistemas">
              <ion-icon name="school-outline" slot="start"></ion-icon>
            </ion-input>
          </ion-item>

          <ion-item lines="none" class="input-item">
            <ion-label position="stacked">Fecha de Nacimiento</ion-label>
            <ion-input formControlName="fecha_nacimiento" type="date">
              <ion-icon name="calendar-outline" slot="start"></ion-icon>
            </ion-input>
          </ion-item>

          <ion-item lines="none" class="input-item">
            <ion-label position="stacked">Ciudad</ion-label>
            <ion-input formControlName="ciudad" placeholder="Ciudad de residencia">
              <ion-icon name="location-outline" slot="start"></ion-icon>
            </ion-input>
          </ion-item>

          <ion-item lines="none" class="input-item">
            <ion-label position="stacked">Dirección</ion-label>
            <ion-input formControlName="direccion" placeholder="Dirección completa">
              <ion-icon name="home-outline" slot="start"></ion-icon>
            </ion-input>
          </ion-item>

          <ion-button expand="block" (click)="guardarPerfil()" class="save-button">
            <ion-icon name="save-outline" slot="start"></ion-icon>
            Guardar Cambios
          </ion-button>

          <ion-button expand="block" fill="outline" (click)="cambiarContrasena()" class="password-button">
            <ion-icon name="key-outline" slot="start"></ion-icon>
            Cambiar Contraseña
          </ion-button>

        </form>
      </ion-card-content>
    </ion-card>

  </div>
</ion-content>