<<<<<<< HEAD
<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/admin/dashboard"></ion-back-button>
    </ion-buttons>
    <ion-title>
      <div class="header-title">
        <ion-icon name="people-outline"></ion-icon>
        Docentes Registrados
      </div>
    </ion-title>
    <ion-button slot="end" fill="clear" (click)="handleRefresh()">
      <ion-icon name="refresh-outline" slot="icon-only"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Refresher -->
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content pullingIcon="refresh-outline" pullingText="Desliza para actualizar"
      refreshingSpinner="crescent" refreshingText="Actualizando...">
    </ion-refresher-content>
  </ion-refresher>

  <div class="docentes-container">

    <!-- Header Info -->
    <div class="info-section">
      <ion-badge color="medium" class="readonly-badge">
        <ion-icon name="eye-outline"></ion-icon>
        Solo lectura
      </ion-badge>
      <h2 class="page-subtitle">Visualización de docentes del sistema</h2>
    </div>

    <!-- Estadísticas -->
    <ion-card class="stats-card">
      <ion-card-content>
        <div class="stat-item">
          <ion-icon name="people" color="primary"></ion-icon>
          <div class="stat-info">
            <h3>{{ docentes.length }}</h3>
            <p>Total de docentes</p>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Gráficas y Filtros -->
    <div class="charts-section">
      <div class="section-header">
        <h2 class="section-title">
          <ion-icon name="stats-chart-outline"></ion-icon>
          Estadísticas
        </h2>

        <!-- Filtro de Período -->
        <ion-segment [(ngModel)]="selectedPeriod" (ionChange)="onPeriodChange($event)" class="period-filter">
          <ion-segment-button value="day">
            <ion-label>Día</ion-label>
          </ion-segment-button>
          <ion-segment-button value="week">
            <ion-label>Semana</ion-label>
          </ion-segment-button>
          <ion-segment-button value="month">
            <ion-label>Mes</ion-label>
          </ion-segment-button>
        </ion-segment>
      </div>

      <!-- Gráfica de Tendencia -->
      <ion-card class="chart-card">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="trending-up-outline"></ion-icon>
            Registro de Docentes
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="chart-container">
            <canvas id="docentesChart"></canvas>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Gráfica por Entidad -->
      <ion-card class="chart-card">
        <ion-card-header>
          <ion-card-title>
            <ion-icon name="business-outline"></ion-icon>
            Docentes por Entidad
          </ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="chart-container">
            <canvas id="entidadesChart"></canvas>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Buscador -->
    <div class="search-section" *ngIf="docentes.length > 0">
      <ion-searchbar [(ngModel)]="searchTerm" (ionInput)="filterDocentes()"
        placeholder="Buscar por nombre, email o entidad..." animated="true" debounce="300">
      </ion-searchbar>
    </div>

    <!-- Loading Skeleton -->
    <div class="docentes-list" *ngIf="loading">
      <ion-card class="docente-card skeleton-card" *ngFor="let item of [1,2,3,4]">
        <ion-card-content>
          <div class="docente-header">
            <div class="skeleton-avatar"></div>
            <div class="skeleton-info">
              <ion-skeleton-text [animated]="true"
                style="width: 60%; height: 20px; margin-bottom: 8px;"></ion-skeleton-text>
              <ion-skeleton-text [animated]="true" style="width: 80%; height: 16px;"></ion-skeleton-text>
            </div>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Sin docentes -->
    <div *ngIf="!loading && docentes.length === 0" class="empty-state">
      <div class="empty-icon-container">
        <ion-icon name="people-outline" class="empty-icon"></ion-icon>
      </div>
      <h3>No hay docentes registrados</h3>
      <p>Aún no se han registrado docentes en el sistema</p>
    </div>

    <!-- Sin resultados de búsqueda -->
    <div *ngIf="!loading && docentes.length > 0 && docentesFiltrados.length === 0" class="empty-state">
      <div class="empty-icon-container">
        <ion-icon name="search-outline" class="empty-icon"></ion-icon>
      </div>
      <h3>No se encontraron resultados</h3>
      <p>Intenta con otros términos de búsqueda</p>
    </div>

    <!-- Lista de docentes -->
    <div class="docentes-list" *ngIf="!loading && docentesFiltrados.length > 0">
      <ion-card class="docente-card" *ngFor="let docente of docentesFiltrados; let i = index"
        [style.animation-delay]="(i * 0.05) + 's'">
        <ion-card-content>
          <div class="docente-header">
            <ion-avatar class="docente-avatar">
              <img [src]="getAvatarUrl(docente)" [alt]="getNombreCompleto(docente)" />
            </ion-avatar>
            <div class="docente-info">
              <h3 class="docente-nombre">{{ getNombreCompleto(docente) }}</h3>
              <div class="docente-email">
                <ion-icon name="mail-outline"></ion-icon>
                {{ docente.email }}
              </div>
            </div>
          </div>

          <div class="docente-details" *ngIf="docente.telefono || docente.entidad || docente.programa || docente.area">
            <div class="detail-item" *ngIf="docente.telefono">
              <ion-icon name="call-outline" color="medium"></ion-icon>
              <span>{{ docente.telefono }}</span>
            </div>
            <div class="detail-item" *ngIf="docente.entidad">
              <ion-icon name="business-outline" color="medium"></ion-icon>
              <span>{{ docente.entidad }}</span>
            </div>
            <div class="detail-item" *ngIf="docente.programa">
              <ion-icon name="school-outline" color="medium"></ion-icon>
              <span>{{ docente.programa }}</span>
            </div>
            <div class="detail-item" *ngIf="docente.area">
              <ion-icon name="briefcase-outline" color="medium"></ion-icon>
              <span>{{ docente.area }}</span>
            </div>
          </div>

          <div class="docente-footer">
            <span class="created-date">
              <ion-icon name="calendar-outline"></ion-icon>
              Registrado: {{ formatDate(docente.created_at) }}
            </span>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

=======
<ion-header class="ion-no-border">
  <ion-toolbar class="header-toolbar">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/admin/dashboard" text=""></ion-back-button>
    </ion-buttons>
    <ion-title>Docentes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="main-content">
  <!-- Spinner de carga -->
  <div *ngIf="loading" class="loading-container">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Cargando docentes...</p>
  </div>

  <!-- Contenido de docentes -->
  <div *ngIf="!loading" class="docentes-container">
    
    <!-- Sección de búsqueda y filtros -->
    <div class="filters-section">
      <div class="search-bar">
        <ion-icon name="search-outline"></ion-icon>
        <input
          type="text"
          placeholder="Buscar por nombre o email..."
          [(ngModel)]="filters.searchText"
          (input)="onSearchChange()"
          class="search-input"
        />
        <ion-button
          *ngIf="filters.searchText"
          fill="clear"
          size="small"
          (click)="filters.searchText = ''; onSearchChange()"
        >
          <ion-icon name="close-outline"></ion-icon>
        </ion-button>
      </div>

      <!-- Filtros -->
      <div class="filters-grid">
        <!-- Filtro Programa -->
        <div class="filter-group">
          <label>Programa</label>
          <select
            [(ngModel)]="filters.programa"
            (change)="onFilterChange()"
            class="filter-select"
          >
            <option value="">Todos los programas</option>
            <option *ngFor="let prog of programas" [value]="prog">
              {{ prog }}
            </option>
          </select>
        </div>

        <!-- Filtro Área -->
        <div class="filter-group">
          <label>Área</label>
          <select
            [(ngModel)]="filters.area"
            (change)="onFilterChange()"
            class="filter-select"
          >
            <option value="">Todas las áreas</option>
            <option *ngFor="let ar of areas" [value]="ar">
              {{ ar }}
            </option>
          </select>
        </div>

        <!-- Botón limpiar filtros -->
        <div class="filter-group" *ngIf="hasActiveFilters()">
          <button class="clear-filters-btn" (click)="clearFilters()">
            <ion-icon name="close-outline"></ion-icon>
            Limpiar
          </button>
        </div>
      </div>

      <!-- Resultado de búsqueda -->
      <div class="search-results">
        <p>
          <strong>{{ docentesFiltrados.length }}</strong> docente(s) encontrado(s)
          <span *ngIf="hasActiveFilters()" class="filter-badge">
            (filtrados de {{ docentes.length }})
          </span>
        </p>
      </div>
    </div>

    <!-- Tabla de docentes (Desktop) -->
    <div *ngIf="!isMobile()" class="table-container">
      <!-- Encabezado de tabla -->
      <div class="table-header">
        <div class="header-cell header-name">Docente</div>
        <div class="header-cell header-email">Email</div>
        <div class="header-cell header-expand"></div>
      </div>

      <!-- Filas de tabla expandibles -->
      <div class="table-body">
        <div *ngFor="let docente of docentesFiltrados" class="table-row-wrapper">
          <!-- Fila principal -->
          <div class="table-row" [class.expanded]="docente.expanded">
            <!-- Docente con avatar -->
            <div class="cell docente-cell">
              <div class="docente-info">
                <div class="avatar" [ngStyle]="getAvatarStyle(docente)">
                  {{ getInitials(docente) }}
                </div>
                <div class="info">
                  <p class="name">{{ docente.nombres }} {{ docente.apellidos }}</p>
                </div>
              </div>
            </div>

            <!-- Email -->
            <div class="cell email-cell">
              <div class="cell-content">
                <ion-icon name="mail-outline"></ion-icon>
                <span>{{ docente.email }}</span>
              </div>
            </div>

            <!-- Botón expandir/contraer -->
            <div class="cell expand-cell">
              <button 
                class="expand-btn" 
                (click)="toggleExpand(docente)"
                [class.active]="docente.expanded"
              >
                <ion-icon 
                  [name]="docente.expanded ? 'chevron-up-outline' : 'chevron-down-outline'"
                ></ion-icon>
              </button>
            </div>
          </div>

          <!-- Contenido expandible -->
          <div class="expand-content" *ngIf="docente.expanded" [@expandCollapse]>
            <div class="detail-grid">
              <!-- Teléfono -->
              <div class="detail-item">
                <label>Teléfono</label>
                <div class="detail-value">
                  <ion-icon name="call-outline"></ion-icon>
                  <span>{{ docente.telefono || 'N/A' }}</span>
                </div>
              </div>

              <!-- Programa -->
              <div class="detail-item">
                <label>Programa</label>
                <span class="badge badge-programa">{{ docente.programa }}</span>
              </div>

              <!-- Área -->
              <div class="detail-item">
                <label>Área</label>
                <span class="badge badge-area">{{ docente.area }}</span>
              </div>

              <!-- Entidad -->
              <div class="detail-item">
                <label>Entidad</label>
                <span class="badge badge-entidad">{{ docente.entidad }}</span>
              </div>

              <!-- Fecha creado -->
              <div class="detail-item">
                <label>Registrado</label>
                <span class="date">{{ docente.created_at | date: 'dd/MM/yyyy' }}</span>
              </div>

              <!-- Fecha actualizado -->
              <div class="detail-item">
                <label>Última actualización</label>
                <span class="date">{{ docente.updated_at | date: 'dd/MM/yyyy' }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Mensaje vacío -->
      <div *ngIf="docentesFiltrados.length === 0" class="empty-state">
        <ion-icon name="school-outline"></ion-icon>
        <p>No hay docentes para mostrar</p>
        <small>Intenta ajustar tus filtros o búsqueda</small>
      </div>
    </div>

    <!-- Cards de docentes (Mobile) -->
    <div *ngIf="isMobile()" class="cards-container">
      <div *ngFor="let docente of docentesFiltrados" class="docente-card" [class.expanded]="docente.expanded">
        <!-- Header clickeable -->
        <div class="card-header-clickable" (click)="toggleExpand(docente)">
          <div class="card-header">
            <div class="avatar" [ngStyle]="getAvatarStyle(docente)">
              {{ getInitials(docente) }}
            </div>
            <div class="card-title">
              <h4>{{ docente.nombres }} {{ docente.apellidos }}</h4>
              <small>{{ docente.entidad }}</small>
            </div>
          </div>

          <div class="expand-icon" [class.active]="docente.expanded">
            <ion-icon 
              [name]="docente.expanded ? 'chevron-up-outline' : 'chevron-down-outline'"
            ></ion-icon>
          </div>
        </div>

        <!-- Información básica siempre visible -->
        <div class="card-basic-info">
          <div class="info-row">
            <ion-icon name="mail-outline"></ion-icon>
            <span>{{ docente.email }}</span>
          </div>
        </div>

        <!-- Contenido expandible -->
        <div *ngIf="docente.expanded" class="card-expand-content">
          <!-- Teléfono -->
          <div class="info-row">
            <ion-icon name="call-outline"></ion-icon>
            <div class="info-text">
              <span class="label">Teléfono</span>
              <span class="value">{{ docente.telefono || 'N/A' }}</span>
            </div>
          </div>

          <!-- Programa -->
          <div class="info-row">
            <ion-icon name="briefcase-outline"></ion-icon>
            <div class="info-text">
              <span class="label">Programa</span>
              <span class="value badge badge-programa">{{ docente.programa }}</span>
            </div>
          </div>

          <!-- Área -->
          <div class="info-row">
            <ion-icon name="briefcase-outline"></ion-icon>
            <div class="info-text">
              <span class="label">Área</span>
              <span class="value badge badge-area">{{ docente.area }}</span>
            </div>
          </div>

          <!-- Fecha -->
          <div class="info-row">
            <small class="date">
              Registrado: {{ docente.created_at | date: 'dd/MM/yyyy' }}
            </small>
          </div>

          <div class="info-row">
            <small class="date">
              Actualizado: {{ docente.updated_at | date: 'dd/MM/yyyy' }}
            </small>
          </div>
        </div>
      </div>

      <!-- Mensaje vacío -->
      <div *ngIf="docentesFiltrados.length === 0" class="empty-state">
        <ion-icon name="school-outline"></ion-icon>
        <p>No hay docentes para mostrar</p>
        <small>Intenta ajustar tus filtros o búsqueda</small>
      </div>
    </div>

    <!-- Paginación -->
    <div *ngIf="totalPages > 1" class="pagination">
      <button
        (click)="goToPage(currentPage - 1)"
        [disabled]="currentPage === 1"
        class="pagination-btn"
      >
        ← Anterior
      </button>

      <div class="pagination-info">
        Página <strong>{{ currentPage }}</strong> de <strong>{{ totalPages }}</strong>
      </div>

      <button
        (click)="goToPage(currentPage + 1)"
        [disabled]="currentPage === totalPages"
        class="pagination-btn"
      >
        Siguiente →
      </button>
    </div>
>>>>>>> 12b5483e3a772962cb6c43c35c1e4be0fc4d057f
  </div>
</ion-content>